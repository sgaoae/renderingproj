{"version":3,"sources":["webpack://rendering/webpack/universalModuleDefinition","webpack://rendering/webpack/bootstrap","webpack://rendering/./node_modules/three/examples/js/libs/stats.min.js","webpack://rendering/./src/controls/CameraControl.js","webpack://rendering/./src/helper/LoadUtils.js","webpack://rendering/./src/material/HeightFieldShaderMaterial.js","webpack://rendering/./src/objects/Bubble.js","webpack://rendering/./src/objects/HeightField.js","webpack://rendering/./src/objects/SpriteWithNumber.js","webpack://rendering/./src/rendering.js","webpack://rendering/external {\"root\":\"THREE\",\"commonjs\":\"three\",\"commonjs2\":\"three\"}"],"names":["CameraControl","camera","face","heightField","domElement","_camera","_heightField","_face","_theta","_speed","_extraHeight","cameraLookAt","bind","_keyMap","addEventListener","e","key","_prevNormal","undefined","_realFace","delta","acc","maxSpeed","cameraPosition","position","clone","add","multiplyScalar","z","heightByFormula","normal","normalInPoint","copy","sub","normalize","realFace","dot","length","_updateDirection","maxBound","x","sign","y","set","Math","cos","sin","up","matrix","setPosition","lookAt","decompose","quaternion","Vector3","loadmtl","mtlpath","onLoad","onProgress","onError","THREE","MTLLoader","load","loadobj","objpath","materials","OBJLoader","setMaterials","loadmtlobj","console","log","HeightFieldShaderMaterial","options","uniforms","color","type","value","Color","light","lightColor","heightInterval","lineWidth","headLight0","projectionMatrix","Matrix4","matrixWorldInverse","headLight1","vertexShader","fragmentShader","side","wireframe","extensions","derivatives","_light","interval","width","ShaderMaterial","Bubble","radius","resolution","power","round","log2","pow","cubeCamera","CubeCamera","spheregeo","SphereBufferGeometry","bubbleMaterial","refractRatio","fresnelBias","fresnelPower","fresnelScale","tCube","renderTarget","bubble","Mesh","scale","_bubble","score","floor","spriteManager","sprite","material","depthTest","drawNumber","toString","velocity","random","acceleration","abs","height","_c","Object3D","HeightField","rows","columns","materialOptions","_width","_height","_rows","_columns","_geometryInfo","_createHeightField","geometry","Geometry","vertices","faces","computeBoundingSphere","computeVertexNormals","content","time0","Date","now","i","j","push","time1","Face3","getVerticeIndex","time2","vertice","point","P1","P2","P3","NRM","maxHill","SHIFT","AMP","PIdiv2","PI","len","max","hx","hy","pt","step","cpt","xpt","ypt","crossVectors","createSpriteWithNumber","canvas","document","createElement","ctx","getContext","fillStyle","fillRect","font","map","Texture","needsUpdate","Sprite","SpriteMaterial","number","mode","clearRect","fillText","scene","renderer","object","controls","stats","init","WebGLRenderer","antialias","context","getExtension","setSize","window","innerWidth","innerHeight","body","appendChild","Scene","PerspectiveCamera","axisHelper","AxesHelper","Stats","resize","aspect","updateProjectionMatrix","skyGeo","CubeGeometry","cubeMaterials","MeshBasicMaterial","TextureLoader","DoubleSide","skyMaterial","MeshFaceMaterial","skyBox","rotateX","bubbleReflectScene","bubbles","updateBubble","bubbleIndex","visible","update","updateBubbles","changeBubblesAcce","b","sphereCollideBox","box","mesh","vectors","min","collide","applyMatrix4","matrixWorld","bubblesCollide","meshArray","traverse","thing","isMesh","collideArray","check","boundingBox","camera0","rotateY","camera1","spritenumber","center","angle","clock","Clock","cameraIsFollowingCar","accTime","hideMsg","animate","requestAnimationFrame","getDelta","orbitControls","updateMatrix","updateMatrixWorld","getInverse","worldPosition","setFromMatrixPosition","coneCos","bubblesCollideArray","setTimeout","move","render","changeColor","setHex","cameraFollowCar","cameraOut","remove","group","offset","children","transparent","opacity","computeBoundingBox","wmap","setInterval","warn","help1"],"mappings":"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","file":"rendering_bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rendering\"] = factory(require(\"three\"));\n\telse\n\t\troot[\"rendering\"] = factory(root[\"THREE\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_three__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel(\"FPS\",\"#0ff\",\"#002\")),f=h(new Stats.Panel(\"MS\",\"#0f0\",\"#020\"));\nif(self.performance&&self.performance.memory)var t=h(new Stats.Panel(\"MB\",\"#f08\",\"#201\"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};\nStats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=f;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,\nv){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+\" \"+h+\" (\"+e(c)+\"-\"+e(g)+\")\",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};\"object\"===typeof module&&(module.exports=Stats);\n","import { Vector3 } from 'three'\n\nclass CameraControl {\n  constructor ({\n    camera,\n    face,\n    heightField,\n    domElement\n  }) {\n    this._camera = camera\n    this._heightField = heightField\n    this._face = face\n    this._theta = 0\n    this._speed = 0\n    this._extraHeight = 5\n    this.cameraLookAt = this.cameraLookAt.bind(this)\n    this._keyMap = {}\n    domElement.addEventListener('keydown', (e) => {\n      // console.log(e)\n      this._keyMap[e.key] = true\n    }, false)\n    domElement.addEventListener('keyup', (e) => {\n      // console.log(e)\n      this._keyMap[e.key] = false\n    }, false)\n\n    // helper information\n    this._prevNormal = undefined\n    this._realFace = undefined\n  }\n\n  update (delta = 0) {\n    // console.log(delta)\n    let acc = 200\n    let maxSpeed = 500\n    let camera = this._camera\n    let heightField = this._heightField\n    if (this._speed > 0) {\n      this._speed = this._speed - acc * delta > 0 ? this._speed - acc * delta : 0\n    } else if (this._speed < 0) {\n      this._speed = this._speed + acc * delta < 0 ? this._speed + acc * delta : 0\n    }\n    if (this._keyMap['w']) {\n      this._speed += (acc + 50) * delta\n    }\n    if (this._keyMap['s']) {\n      this._speed -= (acc + 50) * delta\n    }\n    if (this._speed > maxSpeed) this._speed = maxSpeed\n    if (this._speed < -maxSpeed) this._speed = -maxSpeed\n    // console.log(this._speed)\n    let cameraPosition = camera.position.clone().add(this._face.clone().multiplyScalar(this._speed * delta))\n    cameraPosition.z = 0\n    cameraPosition.z = heightField.heightByFormula(cameraPosition.clone())\n    cameraPosition.z += this._extraHeight\n    let normal = heightField.normalInPoint(cameraPosition)\n    if (this._prevNormal) {\n      normal.copy(this._prevNormal.clone().add(normal.clone().sub(this._prevNormal).multiplyScalar(delta))).normalize()\n    }\n    this._prevNormal = normal.clone()\n    let realFace = this._face.clone().sub(normal.clone().multiplyScalar(this._face.dot(normal) / this._face.length()))\n    this.cameraLookAt(cameraPosition, normal, realFace)\n    this._updateDirection()\n    this._realFace = realFace\n\n    let maxBound = 3900\n    if (cameraPosition.x > maxBound || cameraPosition.x < -maxBound) {\n      let sign = cameraPosition.x * this._speed * this._face.x\n      if (sign > 0) {\n        this._speed = -this._speed\n      }\n    }\n    if (cameraPosition.y > maxBound || cameraPosition.y < -maxBound) {\n      let sign = cameraPosition.y * this._speed * this._face.y\n      if (sign > 0) {\n        this._speed = -this._speed\n      }\n    }\n  }\n\n  _updateDirection () {\n    if (this._keyMap['a']) {\n      this._face.set(\n        Math.cos(this._theta), Math.sin(this._theta), 0\n      )\n      this._theta += 0.02\n    }\n    if (this._keyMap['d']) {\n      this._face.set(\n        Math.cos(this._theta), Math.sin(this._theta), 0\n      )\n      this._theta -= 0.02\n    }\n  }\n\n  cameraLookAt (position, up, face) {\n    let camera = this._camera\n    camera.matrix.setPosition(position).lookAt(position, face.clone().add(position), up)\n    camera.matrix.decompose(camera.position, camera.quaternion, new Vector3())\n  }\n}\n\nexport default CameraControl\n","// import OBJLoader from 'three/examples/js/loaders/OBJLoader'\n// import MTLLoader from 'three/examples/js/loaders/MTLLoader'\n\nlet loadmtl = (mtlpath, onLoad, onProgress, onError) => {\n  new THREE.MTLLoader()\n    .load(mtlpath, onLoad, onProgress, onError)\n}\nlet loadobj = (objpath, materials, onLoad, onProgress, onError) => {\n  new THREE.OBJLoader()\n    .setMaterials(materials)\n    .load(objpath, onLoad, onProgress, onError)\n}\nlet loadmtlobj = (mtlpath, objpath, onLoad, onError) => {\n  loadmtl(mtlpath, (materials) => {\n    console.log(materials)\n    loadobj(objpath, materials, onLoad, undefined, onError)\n  }, undefined, onError)\n}\n\nexport {\n  loadmtl,\n  loadobj,\n  loadmtlobj\n}\n","import { ShaderMaterial, Color, Vector3, Matrix4 } from 'three'\n\nclass HeightFieldShaderMaterial extends ShaderMaterial {\n  constructor (options) {\n    super(options)\n    this.uniforms = {\n      color: {\n        type: 'v3',\n        value: new Color(options.color)\n      },\n      light: {\n        type: 'v3',\n        value: new Vector3()\n      },\n      lightColor: {\n        type: 'v3',\n        value: new Color(0.2, 0.5, 1.0)\n      },\n      heightInterval: {\n        type: 'f',\n        value: 40\n      },\n      lineWidth: {\n        type: 'f',\n        value: 10\n      },\n      headLight0: {\n        value: {\n          projectionMatrix: new Matrix4(),\n          matrixWorldInverse: new Matrix4()\n        }\n      },\n      headLight1: {\n        value: {\n          projectionMatrix: new Matrix4(),\n          matrixWorldInverse: new Matrix4()\n        }\n      }\n    }\n    this.vertexShader = vertexShader\n    this.fragmentShader = fragmentShader\n    this.side = options.side\n    this.wireframe = options.wireframe\n\n    this.extensions.derivatives = true\n  }\n\n  set light (_light) {\n    this.uniforms.light.value = _light\n  }\n  set lightColor (color) {\n    this.uniforms.lightColor.value = color\n  }\n\n  set heightInterval (interval) {\n    this.uniforms.heightInterval.value = interval\n  }\n\n  set lineWidth (width) {\n    this.uniforms.lineWidth.value = width\n  }\n}\n\nconst vertexShader = `\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec3 vLight;\n\nvarying vec3 modelPosition;\nvarying float slope;\n\nuniform vec3 light;\n\nmat4 scaleBiasedMatrix = mat4(0.5, 0.0, 0.0, 0.0,\n  0.0, 0.5, 0.0, 0.0,\n  0.0, 0.0, 0.5, 0.0,\n  0.5, 0.5, 0.5, 1.0);\nstruct HeadLight {\n  mat4 projectionMatrix;\n  mat4 matrixWorldInverse;\n  vec3 color;\n  vec3 worldPosition;\n  float coneCos;\n};\nuniform HeadLight headLight0;\nvarying vec4 hlPosition0;\n\nuniform HeadLight headLight1;\nvarying vec4 hlPosition1;\n\nvoid main () {\n  modelPosition = position;\n  slope = normalize(normal).z;\n\n  vec4 inPosition = vec4(position, 1.0);\n  vec4 vPosition4 = modelViewMatrix * inPosition;\n  vPosition = vPosition4.xyz / vPosition4.w;\n  vec4 vLight4 = modelViewMatrix * vec4(\n    light.x, light.y, light.z + 10.0, 1.0\n  );\n  vLight = vLight4.xyz / vLight4.w;\n  vNormal = normalize(normalMatrix * normal);\n  vec4 modelPosition = modelViewMatrix * inPosition;\n  gl_Position = projectionMatrix * modelPosition;\n\n  hlPosition0 = scaleBiasedMatrix * headLight0.projectionMatrix * headLight0.matrixWorldInverse * modelMatrix * inPosition;\n  hlPosition1 = scaleBiasedMatrix * headLight1.projectionMatrix * headLight1.matrixWorldInverse * modelMatrix * inPosition;\n}\n`\n\nconst fragmentShader = `\n#include <common>\n#include <bsdfs>\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec3 vLight;\nuniform vec3 color;\nuniform vec3 lightColor;\n\nvarying vec3 modelPosition;\nvarying float slope;\nuniform float heightInterval;\nuniform float lineWidth;\n\nstruct HeadLight {\n  mat4 projectionMatrix;\n  mat4 matrixWorldInverse;\n  vec3 color;\n  vec3 worldPosition;\n  float coneCos;\n};\nuniform HeadLight headLight0;\nvarying vec4 hlPosition0;\n\nuniform HeadLight headLight1;\nvarying vec4 hlPosition1;\n\nvoid main () {\n  vec3 finalColor = vec3(0.0);\n  finalColor += color * clamp(dot(normalize(vec3(1.0)), vNormal), 0.0, 1.0);\n\n  float f = abs(2.0 * fract(modelPosition.z / heightInterval) - 1.0);\n  float df = fwidth(modelPosition.z / heightInterval);\n  float fLimit0 = lineWidth / heightInterval * (1.0 + slope);\n  float fLimit = fLimit0;\n  float lineMix = f < fLimit ? f / fLimit : 1.0;\n  vec4 lineColor = vec4(0.0, 0.0, 1.0, 1.0);\n\n  finalColor = mix(lineColor, vec4(finalColor, 1.0), lineMix).rgb;\n\n  vec3 direction = normalize(vLight - vPosition);\n  float ndotl = clamp(dot(direction, vNormal), 0.0, 1.0);\n  finalColor += lightColor * ndotl;\n\n  float x0 = hlPosition0.x / hlPosition0.w;\n  float y0 = hlPosition0.y / hlPosition0.w;\n  float z0 = hlPosition0.z / hlPosition0.w;\n  float x1 = hlPosition1.x / hlPosition1.w;\n  float y1 = hlPosition1.y / hlPosition1.w;\n  float z1 = hlPosition1.z / hlPosition1.w;\n  float a0 = step(0.0, x0) - step(1.0, x0);\n  float b0 = step(0.0, y0) - step(1.0, y0);\n  float c0 = step(0.0, z0) - step(1.0, z0);\n  float a1 = step(0.0, x1) - step(1.0, x1);\n  float b1 = step(0.0, y1) - step(1.0, y1);\n  float c1 = step(0.0, z1) - step(1.0, z1);\n  if (\n    (a0 == 1.0 && b0 == 1.0 && c0 == 1.0) ||\n    (a1 == 1.0 && b1 == 1.0 && c1 == 1.0)\n  ) {\n    vec3 hlColor0 = vec3(0.0);\n    vec3 hlColor1 = vec3(0.0);\n    float angleCos;\n    float lightDistance;\n    lightDistance = length(headLight0.worldPosition - vPosition);\n    angleCos = dot(\n      normalize(vec3(x0, y0, z0) - vec3(0.5)),\n      vec3(0, 0, 1)\n    );\n    if (angleCos > headLight0.coneCos) {\n      float spotEffect = smoothstep( headLight0.coneCos, 1.0, angleCos );\n      hlColor0 = vec3(spotEffect) * headLight0.color * punctualLightIntensityToIrradianceFactor(\n        lightDistance, 18000.0, 1.0\n      );\n    }\n    lightDistance = length(headLight1.worldPosition - vPosition);\n    angleCos = dot(\n      normalize(vec3(x1, y1, z1) - vec3(0.5)),\n      vec3(0, 0, 1)\n    );\n    if (angleCos > headLight1.coneCos) {\n      float spotEffect = smoothstep( headLight1.coneCos, 1.0, angleCos );\n      hlColor1 = vec3(spotEffect) * headLight1.color * punctualLightIntensityToIrradianceFactor(\n        lightDistance, 18000.0, 1.0\n      );\n    }\n    finalColor += mix(vec4(hlColor0, 1.0), vec4(hlColor1, 1.0), 0.5).xyz;\n  }\n\n  gl_FragColor = vec4(finalColor, 1.0);\n}\n`\n\nexport default HeightFieldShaderMaterial\n","import { \n  Object3D, SphereBufferGeometry, CubeCamera, Mesh, ShaderMaterial, Color, Vector3\n} from 'three'\nimport { createSpriteWithNumber } from './SpriteWithNumber'\n\n// written based on https://stemkoski.github.io/Three.js/Bubble.html\nclass Bubble extends Object3D {\n  constructor ({\n    radius\n  }) {\n    super()\n    let resolution = radius / 25 * 256\n    let power = Math.round(Math.log2(resolution))\n    resolution = Math.pow(2, power)\n    // resolution = resolution > 256 ? 256 : resolution\n    let cubeCamera = new CubeCamera(1, 8000, resolution)\n    console.log(radius, power, resolution)\n    this.cubeCamera = cubeCamera\n    this.add(cubeCamera)\n\n    let spheregeo = new SphereBufferGeometry(1, 16, 16)\n\n    this.radius = radius\n\n    let bubbleMaterial = new ShaderMaterial({\n      uniforms: {\n        refractRatio: {\n          type: 'f', value: 1.02\n        },\n        fresnelBias: {\n          type: 'f', value: 0.1\n        },\n        fresnelPower: {\n          type: 'f', value: 2.0\n        },\n        fresnelScale: {\n          type: 'f', value: 1.0\n        },\n        tCube: {\n          type: 't', value: cubeCamera.renderTarget\n        },\n        color: {\n          type: 'v3', value: new Color(0xffffff)\n        }\n      },\n      vertexShader, fragmentShader\n    })\n    let bubble = new Mesh(\n      spheregeo, bubbleMaterial\n    )\n    bubble.scale.set(radius, radius, radius)\n    this.add(bubble)\n    this._bubble = bubble\n\n    this.score = Math.floor(radius / 25 * 10)\n    this.score = this.score > 9 ? 9 : this.score\n\n    this.spriteManager = createSpriteWithNumber()\n    this.spriteManager.sprite.position.z = radius * 1.5\n    this.spriteManager.sprite.scale.set(40, 20, 20)\n    this.spriteManager.sprite.material.depthTest = false\n    this.add(this.spriteManager.sprite)\n    this.spriteManager.drawNumber(this.score.toString())\n\n    this.velocity = new Vector3(\n      Math.random() * 2 - 1,\n      Math.random() * 2 - 1,\n      Math.random() * 2 - 1\n    ).multiplyScalar(200)\n    this.acceleration = new Vector3(\n      Math.random() * 2 - 1,\n      Math.random() * 2 - 1,\n      Math.random() * 2 - 1\n    ).multiplyScalar(10)\n  }\n\n  set color (_c) {\n    this._bubble.material.uniforms.color.value = new Color(_c)\n  }\n\n  move (delta, heightField) {\n    this.position.add(this.velocity.clone().multiplyScalar(delta))\n    this.velocity.add(this.acceleration.clone().multiplyScalar(delta))\n    if (Math.abs(this.position.x) > 3000) {\n      this.velocity.x = this.position.x * this.velocity.x >= 0 ? -this.velocity.x : this.velocity.x\n    }\n    if (Math.abs(this.position.y) > 3000) {\n      this.velocity.y = this.position.y * this.velocity.y >= 0 ? -this.velocity.y : this.velocity.y\n    }\n    let height = heightField.heightByFormula(this.position) + this.radius + 0.1\n    if (this.position.z < height) {\n      this.position.z = height\n    }\n    if (this.position.z > height + 5) {\n      this.position.z = height + 5\n    }\n  }\n}\n\nlet vertexShader = \n`\nuniform float refractRatio;\nuniform float fresnelBias;\nuniform float fresnelScale;\nuniform float fresnelPower;\n\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\n\nvoid main() {\n\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n  vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n\n  vec3 I = worldPosition.xyz - cameraPosition;\n\n  vReflect = reflect( I, worldNormal );\n  vRefract[0] = refract( normalize( I ), worldNormal, refractRatio );\n  vRefract[1] = refract( normalize( I ), worldNormal, refractRatio * 0.99 );\n  vRefract[2] = refract( normalize( I ), worldNormal, refractRatio * 0.98 );\n  vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), fresnelPower );\n\n  gl_Position = projectionMatrix * mvPosition;\n\n}\n`\n\nlet fragmentShader = \n`\nuniform samplerCube tCube;\nuniform vec3 color;\n\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\n\nvoid main() {\n\n  vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n  vec4 refractedColor = vec4( 1.0 );\n\n  refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\n  refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\n  refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\n\n  gl_FragColor = vec4(color, 1.0) * mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\n\n}\n`\n\nexport default Bubble\n","import { Geometry, Mesh, DoubleSide, Vector3, Face3 } from 'three'\nimport HeightFieldShaderMaterial from '../material/HeightFieldShaderMaterial'\n\nclass HeightField {\n  constructor (width, height, rows, columns, materialOptions) {\n    this._width = width\n    this._height = height\n    this._rows = rows\n    this._columns = columns\n    this._geometryInfo = this._createHeightField(width, height, rows, columns)\n    let geometry = new Geometry()\n    geometry.vertices = this._geometryInfo.vertices\n    geometry.faces = this._geometryInfo.faces\n    geometry.computeBoundingSphere()\n    geometry.computeVertexNormals()\n    // let material = new HeightFieldShaderMaterial(materialOptions)\n    // let material = {}\n    this.content = new Mesh(\n      geometry, {}\n    )\n  }\n\n  _createHeightField () {\n    let time0 = Date.now()\n    let rows = this._rows\n    let columns = this._columns\n    let width = this._width\n    let height = this._height\n    let vertices = []\n    for (let i = 0; i < rows; ++i) {\n      for (let j = 0; j < columns; ++j) {\n        vertices.push(new Vector3(\n          -width / 2 + (i / (rows - 1)) * width,\n          -height / 2 + (j / (columns - 1)) * height,\n          0\n        ))\n      }\n    }\n    let time1 = Date.now()\n    console.log(time1 - time0)\n    let faces = []\n    for (let i = 0; i < rows - 1; ++i) {\n      for (let j = 0; j < columns - 1; ++j) {\n        faces.push(new Face3(\n          this.getVerticeIndex(i, j, rows, columns),\n          this.getVerticeIndex(i + 1, j + 1, rows, columns),\n          this.getVerticeIndex(i + 1, j, rows, columns)\n        ))\n        faces.push(new Face3(\n          this.getVerticeIndex(i + 1, j + 1, rows, columns),\n          this.getVerticeIndex(i, j, rows, columns),\n          this.getVerticeIndex(i, j + 1, rows, columns)\n        ))\n      }\n    }\n    let time2 = Date.now()\n    console.log(time2 - time1)\n    for (let i = 0; i < rows; ++i) {\n      for (let j = 0; j < columns; ++j) {\n        let vertice = vertices[this.getVerticeIndex(i, j, rows, columns)]\n        vertice.z += this.heightByFormula(vertice.clone(), width, height)\n      }\n    }\n\n    return {\n      vertices,\n      faces\n    }\n  }\n\n  getVerticeIndex (i, j, rows, columns) {\n    return i + j * rows\n  }\n\n  heightByFormula (vertice) {\n    let point = vertice.clone().sub(new Vector3(this._width/2, this._height/2))\n    point.z = 0\n    let P1 = 0.003\n    let P2 = 0.0039999\n    let P3 = 0.0059661\n    let NRM = 4\n    let maxHill = 300\n    let SHIFT = 0\n    let AMP = 1\n    let PIdiv2 = Math.PI / 2\n    let len = Math.max(1.,0.0001*point.length())\n    let hx = Math.max(0., (Math.sin(P1*(point.x+point.y)) + AMP*Math.sin(P2*point.x+PIdiv2) + SHIFT) )\n    let hy = Math.max(0., (Math.sin(P1*(point.y+.5*point.x)) + AMP*Math.sin(P3*point.y+PIdiv2) + SHIFT))\n    return maxHill*(hx+hy)/NRM/len\n  }\n\n  normalInPoint (pt) {\n    let rows = this._rows\n    let columns = this._columns\n    let width = this._width\n    let height = this._height\n    let step = 0.001\n    let cpt = new Vector3(\n      pt.x, pt.y, this.heightByFormula(pt)\n    )\n    let xpt = new Vector3(\n      pt.x + step,\n      pt.y,\n      0\n    )\n    xpt.z = this.heightByFormula(xpt)\n    let ypt = new Vector3(\n      pt.x,\n      pt.y + step,\n      0\n    )\n    ypt.z = this.heightByFormula(ypt)\n    return new Vector3().crossVectors(\n      xpt.sub(cpt), ypt.sub(cpt)\n    ).normalize()\n  }\n}\n\nexport default HeightField\n","import { Sprite, SpriteMaterial, CanvasTexture, Texture } from 'three'\n\nlet createSpriteWithNumber = () => {\n  let canvas = document.createElement('canvas')\n  canvas.width = 512\n  canvas.height = 256\n  let ctx = canvas.getContext('2d')\n  ctx.fillStyle = 'black'\n  ctx.fillRect(0, 0, 512, 256)\n  ctx.fillStyle = 'red'\n  ctx.font = '300px Arial'\n  let map = new Texture(canvas)\n  map.needsUpdate = true\n  let sprite = new Sprite(\n    new SpriteMaterial({map, color: 0xffffff})\n  )\n  sprite.material.needsUpdate = true\n  sprite.needsUpdate = true\n  sprite.needsUpdate = true\n  sprite.scale.set(2, 1, 1)\n  // console.log(canvas, ctx, map, sprite)\n  return {\n    sprite,\n    drawNumber: (number, mode = 0) => {\n      ctx.clearRect(0, 0, 512, 256)\n      ctx.fillStyle = 'red'\n      ctx.font = '300px Arial'\n      ctx.fillText(number, mode === 0 ? 40 + 128 : 60, 256 - 20)\n      sprite.material.map.needsUpdate = true\n      sprite.material.needsUpdate = true\n      sprite.needsUpdate = true\n    }\n  }\n}\n\nexport { createSpriteWithNumber }\n","import { Geometry, MeshBasicMaterial, Mesh, Vector2, Face3, Color, \n  ShaderMaterial, DoubleSide, WebGLRenderer, Scene, PerspectiveCamera, Vector3,\n  Object3D, SphereGeometry, Clock, CubeGeometry, TextureLoader, MeshFaceMaterial,\n  Line, LineBasicMaterial, AxesHelper, Matrix4, CameraHelper, WebGLRenderTarget,\n  RGBFormat, NearestFilter, DepthTexture, UnsignedShortType, PlaneBufferGeometry,\n  OrthographicCamera, LinearFilter, Sprite, SpriteMaterial, CanvasTexture,\n  BoxGeometry, DataTexture, Texture\n} from 'three'\nimport HeightFieldShaderMaterial from './material/HeightFieldShaderMaterial'\nimport HeightField from './objects/HeightField'\nimport CameraControl from './controls/CameraControl'\nimport Stats from 'three/examples/js/libs/stats.min.js'\nimport { loadmtlobj } from './helper/LoadUtils'\nimport Bubble from './objects/Bubble'\nimport { createSpriteWithNumber } from './objects/SpriteWithNumber'\n\nlet scene, camera, renderer, object, controls\nlet stats\nlet init = () => {\n  renderer = new WebGLRenderer({\n    antialias: true\n  })\n  renderer.context.getExtension('GL_OES_standard_derivatives')\n  renderer.setSize(window.innerWidth, window.innerHeight)\n  document.body.appendChild(renderer.domElement)\n  scene = new Scene()\n  window.scene = scene\n  // scene.background = new THREE.Color( 0xcce0ff );\n  // scene.fog = new THREE.Fog( 0xcce0ff, 500, 10000 );\n  camera = new PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100000)\n  object = new Object3D()\n  let axisHelper = new AxesHelper(400)\n  object.add(axisHelper)\n  controls = new CameraControl({\n    camera: object,\n    face: new Vector3(1, 0, 0),\n    domElement: document.body\n  })\n  stats = new Stats()\n  document.body.appendChild(stats.domElement)\n}\nlet resize = (e) => {\n  renderer.setSize(window.innerWidth, window.innerHeight)\n  camera.aspect = window.innerWidth / window.innerHeight\n  camera.updateProjectionMatrix()\n}\ninit()\nwindow.addEventListener('resize', resize, false)\nwindow.camera = camera\nwindow.renderer = renderer\nwindow.controls = controls\nvar skyGeo = new CubeGeometry(8000, 8000, 8000)\nvar cubeMaterials = [\n  // back side\n  new MeshBasicMaterial({\n    map: new TextureLoader().load('./examples/back.jpg'),\n    side: DoubleSide\n  }),\n  // front side\n  new MeshBasicMaterial({\n    map: new TextureLoader().load('./examples/front.jpg'),\n    side: DoubleSide\n  }), \n  // Top side\n  new MeshBasicMaterial({\n    map: new TextureLoader().load('./examples/top.jpg'),\n    side: DoubleSide\n  }), \n  // Bottom side\n  new MeshBasicMaterial({\n    map: new TextureLoader().load('./examples/bottom.jpg'),\n    side: DoubleSide\n  }), \n  // right side\n  new MeshBasicMaterial({\n    map: new TextureLoader().load('./examples/right.jpg'),\n    side: DoubleSide\n  }), \n  // left side\n  new MeshBasicMaterial({\n    map: new TextureLoader().load('./examples/left.jpg'),\n    side: DoubleSide\n  }) \n];\nvar skyMaterial = new MeshFaceMaterial(cubeMaterials)\nvar skyBox = new Mesh(skyGeo, skyMaterial)\nskyBox.rotateX(Math.PI / 2)\n// scene.add(skyBox)\nlet heightField = new HeightField(8000, 8000, 200, 200)\nheightField.content.material = new HeightFieldShaderMaterial({\n  color: 0x372b35,\n  wireframe: false,\n  side: DoubleSide\n})\ncontrols._heightField = heightField\nlet geometry = heightField.content.geometry\nlet material = heightField.content.material\nwindow.geometry = geometry\nwindow.material = material\nheightField.content.material.light = camera.position\n// scene.add(heightField.content)\nlet bubbleReflectScene = new Object3D()\nbubbleReflectScene.add(heightField.content)\nbubbleReflectScene.add(skyBox)\nscene.add(bubbleReflectScene)\n// complete setup here\n\ncamera.position.copy(geometry.vertices[heightField.getVerticeIndex(40, 40, heightField._rows, heightField._columns)])\ncamera.position.z += controls._extraHeight\ncamera.up.set(0, 0, 1)\nlet face = new Vector3(1, 0, 0)\nlet cameraLookAt = controls.cameraLookAt\nwindow.cameraLookAt = cameraLookAt\ncameraLookAt(camera.position.clone(), camera.up.clone(), face.clone())\n\n// todo\n// add bubble, currently four\nlet bubbles = []\nfor (let i = 0; i < 5; ++i) {\n  let bubble = new Bubble({\n    radius: (10 + Math.random() * 15) * 1.1\n  })\n  bubble.position.copy(geometry.vertices[heightField.getVerticeIndex(18 + i, 25, heightField._rows, heightField._columns)])\n  bubble.position.z = heightField.heightByFormula(bubble.position) + 30\n  bubbles.push(bubble)\n  scene.add(bubble)\n}\nwindow.bubbles = bubbles\n// prepare update things\nlet updateBubble = (bubbleIndex) => {\n  let bubble = bubbles[bubbleIndex]\n  bubble.visible = false\n  bubble.cubeCamera.update(renderer, scene)\n  bubble.visible = true\n}\nlet updateBubbles = () => {\n  for (let i = 0; i < bubbles.length; ++i) {\n    updateBubble(i)\n  }\n}\nlet changeBubblesAcce = () => {\n  bubbles.map((b) => {\n    b.acceleration = new Vector3(\n      Math.random() * 2 - 1,\n      Math.random() * 2 - 1,\n      Math.random() * 2 - 1\n    ).multiplyScalar(10)\n  })\n}\n// view-source:https://stemkoski.github.io/Three.js/Bubble.html\n// add collision\nlet sphereCollideBox = (position, radius, box, mesh) => {\n  let vectors = [\n    new Vector3(box.max.x, box.max.y, box.max.z),\n    new Vector3(box.max.x, box.max.y, box.min.z),\n    new Vector3(box.max.x, box.min.y, box.max.z),\n    new Vector3(box.max.x, box.min.y, box.min.z),\n    new Vector3(box.min.x, box.max.y, box.max.z),\n    new Vector3(box.min.x, box.max.y, box.min.z),\n    new Vector3(box.min.x, box.min.y, box.max.z),\n    new Vector3(box.min.x, box.min.y, box.min.z)\n  ]\n  for (let i = 0; i < vectors.length; ++i) {\n    let collide = vectors[i].applyMatrix4(mesh.matrixWorld).sub(position).length() <= radius\n    if (collide) {\n      return true\n    }\n  }\n  return false\n}\nlet bubblesCollide = (object) => {\n  let meshArray = []\n  object.traverse((thing) => {\n    if (thing.isMesh) {\n      meshArray.push(thing)\n    }\n  })\n  let collideArray = []\n  for (let i = 0; i < bubbles.length; ++i) {\n    let bubble = bubbles[i]\n    let collide = false\n    for (let i = 0; i < meshArray.length; ++i) {\n      let mesh = meshArray[i]\n      let check = sphereCollideBox(bubble.position, bubble.radius, mesh.geometry.boundingBox, mesh)\n      if (check) {\n        collide = true\n        break\n      }\n    }\n    collideArray.push(collide)\n  }\n  return collideArray\n\n\n  // for (var j = 0; vertexIndex < mesh.geometry.vertices.length; vertexIndex++) {\t\t\n  //   var localVertex = MovingCube.geometry.vertices[vertexIndex].clone();\n  //   var globalVertex = localVertex.applyMatrix4( MovingCube.matrix );\n  //   var directionVector = globalVertex.sub( MovingCube.position );\n    \n  //   var ray = new THREE.Raycaster( originPoint, directionVector.clone().normalize() );\n  //   var collisionResults = ray.intersectObjects( collidableMeshList );\n  //   if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) \n  //     appendText(\" Hit \");\n  // }\n} \n\n// add headlights\nlet camera0 = new PerspectiveCamera(120, 1, 0.1, 1000)\ncamera0.quaternion.set(0, 0, 0, 1)\ncamera0.scale.set(1, 1, 1)\ncamera0.position.copy(new Vector3(-2.2, 3.4, -7.1).multiplyScalar(2))\ncamera0.rotateX(-Math.PI / 6)\ncamera0.rotateY(Math.PI / 10)\nobject.add(camera0)\nheightField.content.material.uniforms.headLight0.value = camera0\n// let helper0 = new CameraHelper(camera0)\n// scene.add(helper0)\nwindow.camera0 = camera0\nlet camera1 = new PerspectiveCamera(120, 1, 0.1, 1000)\ncamera1.quaternion.set(0, 0, 0, 1)\ncamera1.scale.set(1, 1, 1)\ncamera1.position.copy(new Vector3(2.2, 3.4, -7.1).multiplyScalar(2))\ncamera1.rotateX(-Math.PI / 6)\ncamera1.rotateY(-Math.PI / 10)\nobject.add(camera1)\nheightField.content.material.uniforms.headLight1.value = camera1\n// let helper1 = new CameraHelper(camera1)\n// scene.add(helper1)\nwindow.camera1 = camera1\n\ncamera0.color = new Color(1, 0.3, 0)\ncamera1.color = new Color(1, 0.3, 0)\n\nlet spritenumber = createSpriteWithNumber()\n// spritenumber.sprite.position.copy(geometry.vertices[heightField.getVerticeIndex(20, 23, heightField._rows, heightField._columns)])\nspritenumber.sprite.position.set(0, 0, -40)\nspritenumber.sprite.scale.set(70,35,35)\nspritenumber.sprite.center.y = 0\nspritenumber.drawNumber('5')\nobject.add(spritenumber.sprite)\n\n//-------key control-----\nscene.add(object)\nobject.position.copy(geometry.vertices[heightField.getVerticeIndex(20, 20, heightField._rows, heightField._columns)])\nobject.position.z += controls._extraHeight\nobject.up.set(0, 0, 1)\ncameraLookAt(object.position.clone(), object.up.clone(), face.clone())\n\nwindow.angle = 40\nlet clock = new Clock()\nlet cameraIsFollowingCar = false\nlet accTime = 0\nwindow.accTime = accTime\nwindow.score = 0\nlet number = 4\nlet hideMsg = true\nvar animate = () => {\n  requestAnimationFrame(animate)\n  window.accTime = accTime\n  let delta = clock.getDelta()\n  if (accTime <= 5.4) {\n    let number = Math.floor(5.4 - accTime)\n    spritenumber.drawNumber(number.toString())\n  }\n  accTime += delta\n  if (window.orbitControls && !cameraIsFollowingCar) {\n    window.orbitControls.update()\n  }\n  if (controls && accTime > 5) {\n    if (hideMsg) {\n      spritenumber.sprite.visible = false\n      hideMsg = false\n    }\n    controls.update(delta)\n  }\n  stats.update()\n  heightField.content.material.light = object.position.clone().add(new Vector3(0, 0, 80)).add(\n    controls._face.clone().multiplyScalar(40)\n  )\n  camera0.updateMatrix()\n  camera0.updateMatrixWorld()\n  camera0.updateProjectionMatrix()\n  camera0.matrixWorldInverse = new Matrix4().getInverse(camera0.matrixWorld)\n  camera0.worldPosition = new Vector3().setFromMatrixPosition(camera0.matrixWorld)\n  camera0.coneCos = Math.cos(window.angle * Math.PI / 180)\n  camera1.updateMatrix()\n  camera1.updateMatrixWorld()\n  camera1.updateProjectionMatrix()\n  camera1.matrixWorldInverse = new Matrix4().getInverse(camera1.matrixWorld)\n  camera1.worldPosition = new Vector3().setFromMatrixPosition(camera1.matrixWorld)\n  camera1.coneCos = Math.cos(window.angle * Math.PI / 180)\n  let bubblesCollideArray = bubblesCollide(object)\n  bubblesCollideArray.map((collide, i) => {\n    if (collide) {\n      bubbles[i].position.copy(new Vector3(Math.random() * 3000, Math.random() * 3000, 0))\n      window.score += bubbles[i].score\n      spritenumber.sprite.visible = true\n      spritenumber.drawNumber('+' + bubbles[i].score.toString(), 1)\n      setTimeout(() => {spritenumber.sprite.visible = false}, 500)\n      number = 5\n      // console.log(i)\n    }\n  })\n  for (let i = 0; i < number; ++i) {\n    bubbles[i].move(delta, heightField)\n  }\n  updateBubbles()\n  renderer.render(scene, camera)\n}\n// animate()\nvar changeColor = () => {\n  var color = new THREE.Color( 0xffffff )\n  color.setHex( Math.random() * 0xffffff )\n  material.uniforms.color.value = color\n}\n\nwindow.cameraFollowCar = () => {\n  // try to make camera follow car\n  object.add(camera)\n  camera.quaternion.set(0, 0, 0, 1)\n  camera.scale.set(1, 1, 1)\n  camera.position.copy(new Vector3(-1.7, 5.9, -0.5).multiplyScalar(2))\n  camera.updateProjectionMatrix()\n  cameraIsFollowingCar = true\n}\nwindow.cameraOut = () => {\n  object.remove(camera)\n  camera.position.copy(object.position)\n  cameraIsFollowingCar = false\n}\n\n// use new car\nloadmtlobj('./public/obj/BMW X5 4.mtl', './public/obj/BMW X5 4.obj', (group) => {\n  // group.rotateX(Math.PI/2)\n  group.rotateY(-Math.PI/2)\n\n  let offset = 10\n  // change phong to basic\n  group.children.map((mesh) => {\n    mesh.material = new MeshBasicMaterial({\n      color: mesh.material.color,\n      transparent: true,\n      opacity: 0.7\n    })\n    mesh.geometry.computeBoundingBox()\n    mesh.geometry.boundingBox.min.x -= offset\n    mesh.geometry.boundingBox.min.y -= offset\n    mesh.geometry.boundingBox.min.z -= offset\n    mesh.geometry.boundingBox.max.x += offset\n    mesh.geometry.boundingBox.max.y += offset\n    mesh.geometry.boundingBox.max.z += offset\n  })\n\n  group.scale.set(0.2, 0.2, 0.2)\n\n  object.add(group)\n\n  window.object = object\n\n  // ONLY FOR INIT ORIENTATION FOR CAR\n  let wmap = controls._keyMap['w']\n  controls._keyMap['w'] = true\n  controls.update(0)\n  controls._keyMap['w'] = wmap\n  console.log('load complete')\n  setInterval(changeColor, 1500)\n  setInterval(changeBubblesAcce, 3000)\n  cameraFollowCar()\n  animate()\n}, (e) => {\n  console.warn('error', e)\n})\n\nlet help1 = () => {\n  console.log('help1')\n}\nexport {\n  help1\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE_three__;"],"sourceRoot":""}